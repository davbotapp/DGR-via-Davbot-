import { GoogleGenerativeAI } from "@google/generative-ai";import { NextResponse } from "next/server";const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);export async function POST(req) {  try {    const { prompt, history } = await req.json();    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });    const chat = model.startChat({      history: history.map(msg => ({        role: msg.role === 'user' ? 'user' : 'model',        parts: [{ text: msg.text }],      })),    });    const result = await chat.sendMessage(prompt);    const response = await result.response;    return NextResponse.json({ text: response.text() });  } catch (error) {    return NextResponse.json({ error: "Erreur serveur" }, { status: 500 });  }}
